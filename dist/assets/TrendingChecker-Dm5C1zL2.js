import{c as P,r as u,e as V,f as F,j as e,a as G,P as $,d as Q,i as D,u as Z,B}from"./index-C6AhWlL7.js";import{C as I,a as J,b as K,c as W,e as L}from"./card-Dl2Li3Yj.js";import{T as X}from"./textarea-DaUGOsBn.js";import{a as ee,u as te}from"./index-BVcAX_Pf.js";import{f as _,b as se,p as ne,y as U,e as ae}from"./helpers-BDDNww03.js";import{E as re}from"./eye-C8-Y2PeY.js";import{D as ie}from"./download-DTWDoFlQ.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],M=P("clock",oe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],de=P("message-circle",ce);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],me=P("thumbs-up",le);var A="Switch",[ue,Se]=G(A),[ge,he]=ue(A),O=u.forwardRef((m,x)=>{const{__scopeSwitch:c,name:b,checked:d,defaultChecked:w,required:v,disabled:f,value:j="on",onCheckedChange:N,form:p,...C}=m,[g,y]=u.useState(null),S=V(x,t=>y(t)),T=u.useRef(!1),s=g?p||!!g.closest("form"):!0,[n,h]=F({prop:d,defaultProp:w??!1,onChange:N,caller:A});return e.jsxs(ge,{scope:c,checked:n,disabled:f,children:[e.jsx($.button,{type:"button",role:"switch","aria-checked":n,"aria-required":v,"data-state":q(n),"data-disabled":f?"":void 0,disabled:f,value:j,...C,ref:S,onClick:Q(m.onClick,t=>{h(a=>!a),s&&(T.current=t.isPropagationStopped(),T.current||t.stopPropagation())})}),s&&e.jsx(Y,{control:g,bubbles:!T.current,name:b,value:j,checked:n,required:v,disabled:f,form:p,style:{transform:"translateX(-100%)"}})]})});O.displayName=A;var z="SwitchThumb",H=u.forwardRef((m,x)=>{const{__scopeSwitch:c,...b}=m,d=he(z,c);return e.jsx($.span,{"data-state":q(d.checked),"data-disabled":d.disabled?"":void 0,...b,ref:x})});H.displayName=z;var xe="SwitchBubbleInput",Y=u.forwardRef(({__scopeSwitch:m,control:x,checked:c,bubbles:b=!0,...d},w)=>{const v=u.useRef(null),f=V(v,w),j=ee(c),N=te(x);return u.useEffect(()=>{const p=v.current;if(!p)return;const C=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(C,"checked").set;if(j!==c&&y){const S=new Event("click",{bubbles:b});y.call(p,c),p.dispatchEvent(S)}},[j,c,b]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:c,...d,tabIndex:-1,ref:f,style:{...d.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Y.displayName=xe;function q(m){return m?"checked":"unchecked"}var fe=O,pe=H;function be({className:m,...x}){return e.jsx(fe,{"data-slot":"switch",className:D("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",m),...x,children:e.jsx(pe,{"data-slot":"switch-thumb",className:D("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Te(){const{setLoading:m,setError:x}=Z(),[c,b]=u.useState(""),[d,w]=u.useState([]),[v,f]=u.useState(!1),[j,N]=u.useState(!1),[p,C]=u.useState(null),g=[{code:"SA",name:"Saudi Arabia",flag:"ðŸ‡¸ðŸ‡¦"},{code:"EG",name:"Egypt",flag:"ðŸ‡ªðŸ‡¬"},{code:"IQ",name:"Iraq",flag:"ðŸ‡®ðŸ‡¶"},{code:"DZ",name:"Algeria",flag:"ðŸ‡©ðŸ‡¿"},{code:"MA",name:"Morocco",flag:"ðŸ‡²ðŸ‡¦"},{code:"LY",name:"Libya",flag:"ðŸ‡±ðŸ‡¾"},{code:"SY",name:"Syria",flag:"ðŸ‡¸ðŸ‡¾"},{code:"TN",name:"Tunisia",flag:"ðŸ‡¹ðŸ‡³"},{code:"JO",name:"Jordan",flag:"ðŸ‡¯ðŸ‡´"},{code:"LB",name:"Lebanon",flag:"ðŸ‡±ðŸ‡§"},{code:"SD",name:"Sudan",flag:"ðŸ‡¸ðŸ‡©"},{code:"QA",name:"Qatar",flag:"ðŸ‡¶ðŸ‡¦"},{code:"KW",name:"Kuwait",flag:"ðŸ‡°ðŸ‡¼"},{code:"AE",name:"UAE",flag:"ðŸ‡¦ðŸ‡ª"},{code:"OM",name:"Oman",flag:"ðŸ‡´ðŸ‡²"},{code:"YE",name:"Yemen",flag:"ðŸ‡¾ðŸ‡ª"},{code:"BH",name:"Bahrain",flag:"ðŸ‡§ðŸ‡­"},{code:"PS",name:"Palestine",flag:"ðŸ‡µðŸ‡¸"}],y=async()=>{if(c.trim()){f(!0),m(!0),x(null),w([]);try{const s=ne(c);if(s.length===0)throw new Error("No valid URLs provided");const n={};for(const t of g)try{const a=await U.getTrendingVideos(t.code,"20",50);n[t.code]=a.map(i=>i.id)}catch(a){console.error(`Error fetching trending videos for ${t.name}:`,a),n[t.code]=null}const h=[];for(const t of s)try{const a=ae(t);if(!a){console.error(`Could not extract video ID from URL: ${t}`);continue}const i=await U.getVideoDetails(a),o={},l=[];for(const r of g){const E=n[r.code];if(E===null)o[r.code]={trending:!1,rank:null,regionName:r.name,flag:r.flag,status:"unavailable"};else{const k=E.indexOf(a),R=k!==-1;o[r.code]={trending:R,rank:R?k+1:null,regionName:r.name,flag:r.flag,status:R?"trending":"not_trending"},R&&l.push({code:r.code,name:r.name,flag:r.flag,rank:k+1})}}h.push({videoId:a,videoDetails:i,trendingStatus:o,currentlyTrendingIn:l,url:t})}catch(a){console.error(`Error processing video URL: ${t}`,a)}w(h),C(new Date)}catch(s){console.error("Error checking trending status:",s),x(s.message||"Failed to check trending status. Please try again.")}finally{f(!1),m(!1)}}},S=()=>{if(d.length===0)return;const s=["Video Title","Channel","Views","Likes","Comments","Published Date",...g.flatMap(o=>[`Trending in ${o.name}`,`${o.name} Rank`]),"URL"],n=d.map(o=>{const l=o.videoDetails,r=g.flatMap(E=>{const k=o.trendingStatus[E.code];return[k.status==="trending"?"Yes":k.status==="unavailable"?"Data Unavailable":"No",k.rank||""]});return[`"${l.snippet.title.replace(/"/g,'""')}"`,`"${l.snippet.channelTitle.replace(/"/g,'""')}"`,l.statistics.viewCount,l.statistics.likeCount||0,l.statistics.commentCount||0,l.snippet.publishedAt,...r,o.url].join(",")}),h=[s.join(","),...n].join(`
`),t=new Blob([h],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(t),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download","trending_status_gaming.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},T=s=>j?g.filter(n=>{var h;return(h=s[n.code])==null?void 0:h.trending}):g;return e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Video Trending Checker"}),e.jsxs(I,{className:"mb-8",children:[e.jsxs(J,{children:[e.jsx(K,{children:"Enter YouTube Video URLs"}),e.jsx(W,{children:"Check if videos are trending in Gaming category (Top 50) across Arab countries"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(X,{placeholder:"https://www.youtube.com/watch?v=...\\nhttps://youtu.be/...",value:c,onChange:s=>b(s.target.value),className:"min-h-32"}),e.jsx(B,{onClick:y,disabled:v||!c.trim(),className:"w-full sm:w-auto",children:v?"Checking...":"Check Trending Status"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:"Checks against Top 50 trending Gaming videos in 18 Arab countries"})]})]}),d.length>0&&e.jsxs("div",{className:"space-y-6",children:[d.map(s=>{const n=s.videoDetails,h=s.currentlyTrendingIn.length>0;return e.jsx(I,{className:h?"border-primary":"",children:e.jsxs(L,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[e.jsx("img",{src:n.snippet.thumbnails.medium.url,alt:n.snippet.title,className:"w-full md:w-64 rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-xl mb-2",children:n.snippet.title}),e.jsx("p",{className:"text-muted-foreground mb-3",children:n.snippet.channelTitle}),e.jsxs("div",{className:"flex flex-wrap gap-6 text-sm text-muted-foreground mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{size:16}),e.jsxs("span",{children:[_(n.statistics.viewCount)," views"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(me,{size:16}),e.jsxs("span",{children:[_(n.statistics.likeCount||0)," likes"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{size:16}),e.jsxs("span",{children:[_(n.statistics.commentCount||0)," comments"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{size:16}),e.jsxs("span",{children:["Published ",se(n.snippet.publishedAt)]})]})]}),e.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"View on YouTube"})]})]}),s.currentlyTrendingIn.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Currently Trending In"}),p&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(M,{size:14}),"Last checked: ",p.toLocaleTimeString()]})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:s.currentlyTrendingIn.map(t=>e.jsxs("div",{className:"bg-green-100 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:t.flag}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-800 dark:text-green-200",children:t.code}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-300",children:t.name}),e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:["Rank #",t.rank," of 50"]})]})]},t.code))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Status in All Arab Countries"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{checked:j,onCheckedChange:N,id:"show-trending-only"}),e.jsx("label",{htmlFor:"show-trending-only",className:"text-sm",children:"Show only trending countries"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:T(s.trendingStatus).map(t=>{const a=s.trendingStatus[t.code];let i,o,l,r;return a.status==="trending"?(i="bg-green-100 dark:bg-green-900/20 border-green-200 dark:border-green-800",o="text-green-800 dark:text-green-200",l=`Trending #${a.rank}`,r="ðŸŸ¢"):a.status==="unavailable"?(i="bg-yellow-100 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800",o="text-yellow-800 dark:text-yellow-200",l="Data unavailable",r="ðŸŸ¡"):(i="bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700",o="text-gray-600 dark:text-gray-400",l="Not trending",r="âšª"),e.jsxs("div",{className:`p-3 rounded-lg border ${i}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:t.flag}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:t.code}),e.jsx("div",{className:"text-xs text-muted-foreground",children:t.name})]})]}),e.jsx("span",{className:"text-sm",children:r})]}),e.jsx("div",{className:`text-sm font-medium ${o}`,children:l})]},t.code)})})]})]})},s.videoId)}),e.jsx(I,{children:e.jsx(L,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Export Results"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Download trending status data for all ",d.length," videos"]})]}),e.jsxs(B,{variant:"outline",onClick:S,disabled:d.length===0,children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Export to CSV"]})]})})})]})]})}export{Te as default};
