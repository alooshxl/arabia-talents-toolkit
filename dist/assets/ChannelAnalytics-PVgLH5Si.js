import{u as D,r as d,j as e,I as S,B as U}from"./index-C6AhWlL7.js";import{C as m,a as u,b as j,c as p,e as g}from"./card-Dl2Li3Yj.js";import{T as z,a as B,b as y,c as h,d as M,e as x}from"./table-DvSDxIKz.js";import{f as c,y as o}from"./helpers-BDDNww03.js";import{U as R,V as L}from"./video-DLOXwhS-.js";import{E as F}from"./eye-C8-Y2PeY.js";function J(){const{setLoading:b,setError:v}=D(),[r,C]=d.useState(""),[n,V]=d.useState(null),[H,k]=d.useState([]),[f,w]=d.useState(!1),[N,T]=d.useState([]),I=async()=>{if(r.trim()){w(!0),b(!0),v(null);try{let s=o.extractChannelId(r);if(s||(s=await o.getChannelIdFromCustomUrl(r)),!s)throw new Error("Could not find a valid channel ID from the provided URL");const t=await o.getChannelInfo(s);V(t);const a=(await o.getChannelVideos(s,200)).map(P=>P.id.videoId),l=await o.getMultipleVideoDetails(a);k(l);const E=A(l);T(E)}catch(s){console.error("Error analyzing channel:",s),v(s.message||"Failed to analyze channel. Please check the URL and try again.")}finally{w(!1),b(!1)}}},A=s=>{const t={};return s.forEach(i=>{const a=new Date(i.snippet.publishedAt),l=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;t[l]||(t[l]={month:l,videosPublished:0,totalViews:0,videos:[]}),t[l].videosPublished++,t[l].totalViews+=parseInt(i.statistics.viewCount||0),t[l].videos.push(i)}),Object.keys(t).forEach(i=>{const a=t[i];a.avgViewsPerVideo=a.videosPublished>0?Math.round(a.totalViews/a.videosPublished):0}),Object.values(t).sort((i,a)=>a.month.localeCompare(i.month))};return e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Channel Analytics"}),e.jsxs(m,{className:"mb-8",children:[e.jsxs(u,{children:[e.jsx(j,{children:"Enter YouTube Channel URL"}),e.jsx(p,{children:"Paste a YouTube channel URL to get detailed analytics and insights"})]}),e.jsx(g,{children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(S,{placeholder:"https://www.youtube.com/channel/... or https://www.youtube.com/@...",value:r,onChange:s=>C(s.target.value),className:"flex-1"}),e.jsx(U,{onClick:I,disabled:f||!r.trim(),children:f?"Analyzing...":"Analyze"})]})})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:n.snippet.thumbnails.default.url,alt:n.snippet.title,className:"w-16 h-16 rounded-full"}),e.jsxs("div",{children:[e.jsx(j,{children:n.snippet.title}),e.jsx(p,{children:n.snippet.description})]})]})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(R,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Subscribers"}),e.jsx("div",{className:"text-2xl font-bold",children:c(n.statistics.subscriberCount)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(F,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Views"}),e.jsx("div",{className:"text-2xl font-bold",children:c(n.statistics.viewCount)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(L,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Videos"}),e.jsx("div",{className:"text-2xl font-bold",children:c(n.statistics.videoCount)})]})]})]})})]}),N.length>0&&e.jsxs(m,{children:[e.jsxs(u,{children:[e.jsx(j,{children:"Monthly Breakdown"}),e.jsx(p,{children:"Video publishing and performance metrics by month"})]}),e.jsx(g,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(z,{children:[e.jsx(B,{children:e.jsxs(y,{children:[e.jsx(h,{children:"Month"}),e.jsx(h,{className:"text-right",children:"Videos Published"}),e.jsx(h,{className:"text-right",children:"Total Views"}),e.jsx(h,{className:"text-right",children:"Average Views per Video"})]})}),e.jsx(M,{children:N.slice(0,12).map(s=>e.jsxs(y,{children:[e.jsx(x,{className:"font-medium",children:s.month}),e.jsx(x,{className:"text-right",children:s.videosPublished}),e.jsx(x,{className:"text-right",children:c(s.totalViews)}),e.jsx(x,{className:"text-right",children:c(s.avgViewsPerVideo)})]},s.month))})]})})})]})]})]})}export{J as default};
