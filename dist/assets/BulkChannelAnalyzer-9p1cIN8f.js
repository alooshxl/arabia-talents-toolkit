import{u as B,r as y,j as e,B as N}from"./index-C6AhWlL7.js";import{C as A,a as D,b as T,c as V,e as U}from"./card-Dl2Li3Yj.js";import{T as M}from"./textarea-DaUGOsBn.js";import{T as $,a as F,b as L,c as i,d as Y,e as c}from"./table-DvSDxIKz.js";import{f as b,p as H,y as m,c as R}from"./helpers-BDDNww03.js";import{D as _}from"./download-DTWDoFlQ.js";function Q(){const{setLoading:j,setError:g}=B(),[x,k]=y.useState(""),[h,C]=y.useState([]),[f,w]=y.useState(!1),z=async()=>{if(x.trim()){w(!0),j(!0),g(null),C([]);try{const s=H(x);if(s.length===0)throw new Error("No valid URLs provided");const o=[];for(const a of s)try{let n=m.extractChannelId(a);if(n||(n=await m.getChannelIdFromCustomUrl(a)),!n){console.error(`Could not find a valid channel ID for URL: ${a}`);continue}const d=await m.getChannelInfo(n),t=(await m.getChannelVideos(n,50)).map(u=>u.id.videoId),v=await m.getMultipleVideoDetails(t),E=R(v.filter(u=>{const p=new Date(u.snippet.publishedAt),r=new Date;return r.setDate(r.getDate()-30),p>=r})),S=R(v.filter(u=>{const p=new Date(u.snippet.publishedAt),r=new Date;return r.setFullYear(r.getFullYear()-1),p>=r}));o.push({channelName:d.snippet.title,channelUrl:a,subscriberCount:parseInt(d.statistics.subscriberCount),country:d.snippet.country||"Unknown",avgViewsLast30Days:E,avgViews12Months:S,contentType:"Unknown"})}catch(n){console.error(`Error processing channel URL: ${a}`,n)}C(o)}catch(s){console.error("Error analyzing channels:",s),g(s.message||"Failed to analyze channels. Please try again.")}finally{w(!1),j(!1)}}},I=()=>{if(h.length===0)return;const s=["Channel Name","URL","Subscribers","Country","Avg. Views (Last 30 Days)","Avg. Views (Last 12 Months)","Content Type"],o=h.map(t=>[`"${t.channelName.replace(/"/g,'""')}"`,`"${t.channelUrl.replace(/"/g,'""')}"`,t.subscriberCount,`"${t.country.replace(/"/g,'""')}"`,t.avgViewsLast30Days,t.avgViews12Months,`"${t.contentType.replace(/"/g,'""')}"`].join(",")),a=[s.join(","),...o].join(`
`),n=new Blob([a],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(n),l=document.createElement("a");l.setAttribute("href",d),l.setAttribute("download","bulk_channel_analysis.csv"),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)};return e.jsxs("div",{className:"container mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Bulk Channel Analyzer"}),e.jsxs(A,{className:"mb-8",children:[e.jsxs(D,{children:[e.jsx(T,{children:"Enter YouTube Channel URLs"}),e.jsx(V,{children:"Analyze multiple YouTube channels at once"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(M,{placeholder:"https://www.youtube.com/channel/...\\nhttps://www.youtube.com/c/...\\nhttps://www.youtube.com/@...",value:x,onChange:s=>k(s.target.value),className:"min-h-32"}),e.jsx(N,{onClick:z,disabled:f||!x.trim(),className:"w-full sm:w-auto",children:f?"Analyzing...":"Analyze Channels"})]})})]}),h.length>0&&e.jsxs(A,{children:[e.jsx(D,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(T,{children:"Analysis Results"}),e.jsxs(V,{children:["Analyzed ",h.length," channels"]})]}),e.jsxs(N,{onClick:I,variant:"outline",size:"sm",children:[e.jsx(_,{className:"h-4 w-4 mr-2"})," Export to CSV"]})]})}),e.jsx(U,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs($,{children:[e.jsx(F,{children:e.jsxs(L,{children:[e.jsx(i,{children:"Channel Name"}),e.jsx(i,{children:"URL"}),e.jsx(i,{className:"text-right",children:"Subscribers"}),e.jsx(i,{children:"Country"}),e.jsx(i,{className:"text-right",children:"Avg. Views (30 Days)"}),e.jsx(i,{className:"text-right",children:"Avg. Views (12 Months)"}),e.jsx(i,{children:"Content Type"})]})}),e.jsx(Y,{children:h.map((s,o)=>e.jsxs(L,{children:[e.jsx(c,{className:"font-medium",children:s.channelName}),e.jsx(c,{children:e.jsx("a",{href:s.channelUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Link"})}),e.jsx(c,{className:"text-right",children:b(s.subscriberCount)}),e.jsx(c,{children:s.country}),e.jsx(c,{className:"text-right",children:b(s.avgViewsLast30Days)}),e.jsx(c,{className:"text-right",children:b(s.avgViews12Months)}),e.jsx(c,{children:s.contentType})]},o))})]})})})]})]})}export{Q as default};
